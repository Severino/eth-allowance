(this["webpackJsonpeth-allowance"]=this["webpackJsonpeth-allowance"]||[]).push([[0],{101:function(t,e){t.exports={ERC20ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],ERC721ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"_name",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"_approved",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"implementsERC721",outputs:[{name:"_implementsERC721",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"_totalSupply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"_tokenId",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"tokenMetadata",outputs:[{name:"_infoUrl",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_approvedAddress",type:"address"},{name:"_metadata",type:"string"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"_symbol",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"numTokensTotal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getOwnerTokens",outputs:[{name:"_tokenIds",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_to",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_approved",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"}]}},102:function(t,e){t.exports={compound:"https://app.compound.finance/#",aave:"https://aave.com/",uniswap:"https://uniswap.org/",nest:"https://nestdapp.io/",cofi:"https://cofix.io/"}},103:function(t,e,n){},215:function(t,e){},223:function(t,e){},239:function(t,e){},241:function(t,e){},265:function(t,e){},284:function(t,e){},286:function(t,e){},318:function(t,e){},323:function(t,e){},325:function(t,e){},332:function(t,e){},351:function(t,e){},451:function(t,e,n){var a=n(452).default,i=n(453),s=n(454),r=new a;r.add(i),r.add(s),t.exports=r.object},452:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var a=n(9),i=n(10),s=function(){function t(){Object(a.a)(this,t),this.map={}}return Object(i.a)(t,[{key:"add",value:function(t){var e=t.name,n=t.abi,a=t.contract;if(!e||!n||!a)throw new Error("Vendor is invalid. Must have name, abi and contract.",{name:e,abi:n,contract:a});this.map[a]=t}},{key:"object",get:function(){return this.map}}]),t}()},453:function(t,e,n){"use strict";n.r(e),n.d(e,"abi",(function(){return a})),n.d(e,"contract",(function(){return i})),n.d(e,"name",(function(){return s}));var a=[{inputs:[{internalType:"contract CakeToken",name:"_govToken",type:"address"},{internalType:"contract SyrupBar",name:"_syrup",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_getNewRewardPerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contract IBEP20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"govToken",outputs:[{internalType:"contract CakeToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNewRewardPerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"enterStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"leaveStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contract IMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contract IBEP20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accCakePerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"syrup",outputs:[{internalType:"contract SyrupBar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multiplierNumber",type:"uint256"}],name:"updateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],i="0x62bA9Fc504d3C854A0E270Bb5E7A6883658Fb70f",s="Viper Chef"},454:function(t,e,n){"use strict";n.r(e),n.d(e,"abi",(function(){return a})),n.d(e,"contract",(function(){return i})),n.d(e,"name",(function(){return s}));var a=[{name:"initialize",inputs:[{internalType:"address",name:"_token0",type:"address"},{internalType:"address",name:"_token1",type:"address"}]}],i="0xa5C06165CFEF143b9a461ae1156E9F257df7f762",s="Viper-LP"},493:function(t,e,n){},494:function(t,e,n){},495:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var a=n(6),i=n.n(a),s=n(17),r=n(9),o=n(10),u=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"available",value:function(){throw new Error("Call of abstract method 'available' on wallet: "+this.name)}},{key:"connect",value:function(){var t=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Call of abstract method 'connect' on wallet: "+this.name);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){var n,a=null===(n=this.listeners[t])||void 0===n?void 0:n.indexOf(e);if(-1===a)return!1;this.listeners[t].splice(a,1)}},{key:"accountChanged",value:function(){throw new Error("Call of abstract method 'accountChanged' on wallet: "+this.name)}},{key:"networkChanged",value:function(){throw new Error("Call of abstract method 'networkChanged' on wallet: "+this.name)}},{key:"getChainId",value:function(){var t=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Call of abstract method 'getNetwork' on wallet: "+this.name);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()},497:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),s=n(64),r=n.n(s),o=(n(103),n(200)),u=n(65),c=n.n(u),p=n(9),l=n(10),d=n(16),y=n(15),m=n(0),f=function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"jumbotron",children:Object(m.jsxs)("div",{id:"titles",children:[Object(m.jsx)("img",{src:"harmony-lock-logo.png",alt:"Harmony Lock Logo"}),Object(m.jsx)("h1",{children:"Harmony Allowance"}),Object(m.jsx)("h2",{children:"Find & revoke all the addresses that can spend your tokens"})]})})})}}]),n}(a.Component),b=n(6),h=n.n(b),v=n(201),j=n(17),w=n(12),x=n(199),k=n(65),O=new k(k.givenProvider),T=n(444),g="0x095ea7b3",M="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",_=n(101),C=_.ERC20ABI,N=_.ERC721ABI,I=n(451),E=n(455),S=E.toBech32,A=E.fromBech32;function R(t){switch(parseInt(t,10)){case 16666e5:return"https://api.harmony.one";case 16667e5:return"https://api.s0.pops.one";default:return null}}function U(t,e){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(h.a.mark((function t(e,n){var a,i,s,r,o,u,c,p,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=[],i=0,s=S(n);case 4:return t.next=6,T.post(e).set("Content-Type","application/json").accept("application/json").send({jsonrpc:"2.0",method:"hmyv2_getTransactionsHistory",params:[{address:s,pageIndex:i,pageSize:1e3,fullTx:!0,txType:"ALL",order:"ASC"}],id:1});case 6:if(u=t.sent,r=u.body.result.transactions,(null===(o=r)||void 0===o?void 0:o.length)>0){c=Object(x.a)(r.values());try{for(c.s();!(p=c.n()).done;)(l=p.value).input.includes(g)&&function(){var t={};l.to=A(l.to),t.hash=l.hash,t.timestamp=l.timestamp,t.contract=O.utils.toChecksumAddress(l.to),t.approved=O.utils.toChecksumAddress("0x"+l.input.substring(34,74));var e=l.input.substring(74);e.includes(M)?t.allowance="unlimited":(t.allowance="some",t.allowanceUnEdited=e),0!==parseInt(e,16)?a.push(t):a=a.filter((function(e){return!(e.approved===t.approved)}))}()}catch(d){c.e(d)}finally{c.f()}}i++;case 10:if(r&&r.length>0){t.next=4;break}case 11:return console.log("Approval transactions found: "+a.length),t.abrupt("return",a);case 15:throw t.prev=15,t.t0=t.catch(0),t.t0;case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function F(t){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(h.a.mark((function t(e){var n,a,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I[e],a=(null===n||void 0===n?void 0:n.abi)||C,i=new O.eth.Contract(a,e),t.prev=3,t.next=6,i.methods.name().call();case 6:s=t.sent,t.next=14;break;case 9:t.prev=9,t.t0=t.catch(3),console.error(t.t0),4,s=(null===n||void 0===n?void 0:n.name)||e.substring(0,6)+"..."+e.substring(e.length-4);case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function L(){return(L=Object(j.a)(h.a.mark((function t(e,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new O.eth.Contract(N,e),t.prev=1,t.next=4,a.methods.ownerOf(n).call();case 4:return t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}var W=n(102),H=n.n(W),D=n(101),V=n(66),q=n.n(V),z=n(67),Y=n(33),J=function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).props=t,a.setRevokeClick=a.setRevokeClick.bind(Object(w.a)(a)),a.dappURL=a.dappURL.bind(Object(w.a)(a)),a.initRevoke=a.initRevoke.bind(Object(w.a)(a)),a.revokeSuccess=a.revokeSuccess.bind(Object(w.a)(a)),a.revokeFailed=a.revokeFailed.bind(Object(w.a)(a)),a}return Object(l.a)(n,[{key:"dappURL",value:function(){for(var t="",e=0,n=Object.keys(H.a);e<n.length;e++){var a=n[e];this.props.tx.contractName.toLowerCase().includes(a)&&(t=H.a[a])}return t}},{key:"setRevokeClick",value:function(){var t=this,e=new this.props.web3.eth.Contract(D.ERC20ABI,this.props.tx.contract);(function(t,e){return L.apply(this,arguments)})(e,this.props.tx.allowanceUnEdited).then((function(n){n?(t.initRevoke(),e.methods.approve(0,t.props.tx.allowanceUnEdited).send({from:t.props.account}).then(t.revokeSuccess).catch(t.revokeFailed)):(t.initRevoke(),e.methods.approve(t.props.tx.approved,0).send({from:t.props.account}).then(t.revokeSuccess).catch(t.revokeFailed))}))}},{key:"initRevoke",value:function(){this.props.onStatusChange("pending",this.props.tx)}},{key:"revokeSuccess",value:function(t){Y.b.success("Successfully Revoked!"),console.log(t),this.props.onStatusChange("success",this.props.tx)}},{key:"revokeFailed",value:function(t){Y.b.error("Could Not Revoke Allowance!"),console.error(t),this.props.onStatusChange("none",this.props.tx)}},{key:"renderRevokeButton",value:function(){var t=this;return"pending"===this.props.status?Object(m.jsx)("button",{className:"icon-btn",children:Object(m.jsx)(q.a,{path:z.b,size:1,color:"#dbdbdb"})}):"success"===this.props.status?Object(m.jsx)("button",{className:"icon-btn",children:Object(m.jsx)(q.a,{path:z.c,size:1,color:"#78e900"})}):Object(m.jsx)("button",{className:"icon-btn",name:"revoke",onClick:function(){t.setRevokeClick()},children:Object(m.jsx)(q.a,{path:z.a,size:1,color:"#e90000"})})}},{key:"render",value:function(){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"grid-items",children:parseInt(this.props.tx.id)+1}),Object(m.jsx)("td",{className:"grid-items",children:new Date(1e3*parseInt(this.props.tx.timestamp)).toLocaleString()}),Object(m.jsx)("td",{className:"grid-items",children:Object(m.jsx)("a",{href:this.props.tx.harmonyExplorerUrl+this.props.tx.contract,children:this.props.tx.contractName})}),Object(m.jsx)("td",{className:"grid-items",children:Object(m.jsx)("a",{href:this.props.tx.harmonyExplorerUrl+this.props.tx.approved,children:this.props.tx.approvedName})}),Object(m.jsx)("td",{className:"grid-items",children:this.props.tx.allowance}),Object(m.jsx)("td",{className:"grid-items",children:this.renderRevokeButton()})]},"allowance-nr-"+this.props.tx.hash)}}]),n}(a.Component),K=(n(493),function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"renderText",value:function(){return null==this.props.total?Object(m.jsx)("div",{children:"Fetching Items ..."}):Object(m.jsxs)("div",{children:["Loading items ",this.props.current,"/",this.props.total]})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"spinner",children:[Object(m.jsxs)("div",{className:"lds-grid",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]}),this.renderText()]})}}]),n}(a.Component)),G=n(14),Q=(n(494),function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={value:10,tipped:!1},a.updateValue=a.updateValue.bind(Object(w.a)(a)),a.sendTip=a.sendTip.bind(Object(w.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.props.account?Object(m.jsxs)("div",{className:"tip",children:[!this.state.tipped&&Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{children:["Thank you for using ",Object(m.jsx)("i",{children:"Harmony Allowance"})]}),Object(m.jsx)("p",{children:"If it was useful for you, please consider giving a small tip to the developer. This will help to keep this and future projects running!"}),Object(m.jsx)("input",{type:"number",value:this.state.value,onInput:this.updateValue}),Object(m.jsx)("button",{id:"tip-button",onClick:this.sendTip,children:"Tip"})]}),this.state.tipped&&Object(m.jsx)("p",{children:"THANK YOU FOR YOUR SUPPORT!!!"})]}):Object(m.jsx)("div",{})}},{key:"updateValue",value:function(t){this.setState({value:t.target.value})}},{key:"sendTip",value:function(){var t=this;window.ethereum.request({method:"eth_sendTransaction",params:[{from:this.props.account,to:this.props.address,value:Object(G.toHex)(Object(G.toWei)(this.state.value.toString()))}]}).then((function(){t.setState({tipped:!0})})).catch(console.error)}}]),n}(a.Component)),X=function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,null,[{key:"name",get:function(){return"metamask"}},{key:"getChainId",value:function(){var t=Object(j.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.chainId;case 2:return e=t.sent,t.abrupt("return",parseInt(e,16));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"available",value:function(){return window.ethereum&&window.ethereum.isMetaMask}},{key:"connect",value:function(){var t=Object(j.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.requestAccounts());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"requestAccounts",value:function(){return new Promise((function(t,e){window.ethereum?window.ethereum.request({method:"eth_requestAccounts"}).then((function(e){return t(e[0])})).catch((function(t){4001===t.code?e("Please connect to MetaMask."):e(t)})):e("Metamask not found!")}))}}]),n}(n(495).default),Z={};Z[X.name]=X;var $=Z,tt=function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).connectMetaMask=a.connectMetaMask.bind(Object(w.a)(a)),a.connectOneWallet=a.connectOneWallet.bind(Object(w.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){function t(t){return t.account?function(t){return Object(m.jsx)("h3",{children:t.account})}(t):function(t){return Object(m.jsx)("button",{onClick:t.connect,children:"Connect MetaMask"})}(t)}return Object(m.jsx)("div",{className:"signin",children:Object(m.jsx)(t,{connect:this.connectMetaMask,account:this.props.account})})}},{key:"connectMetaMask",value:function(){this.connectWallet("metamask")}},{key:"connectOneWallet",value:function(){this.connectWallet("onewallet")}},{key:"connectWallet",value:function(){var t=Object(j.a)(h.a.mark((function t(e){var n,a,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=$[e])){t.next=14;break}return t.next=4,n.connect();case 4:if(a=t.sent,i=null,!a){t.next=11;break}return t.next=9,n.getChainId();case 9:s=t.sent,i=s;case 11:this.props.update({account:a,network:i}),t.next=15;break;case 14:console.error('Wallet with name "'.concat(e,'" is not defined!'));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(a.Component),et=function(t){Object(d.a)(n,t);var e=Object(y.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={renderedTransactions:[],account:void 0,fee:null,loading:!1,totalTransactionCount:null,currentTransactionCount:null},a.props=t,a.walletUpdated=a.walletUpdated.bind(Object(w.a)(a)),a.statusChanged=a.statusChanged.bind(Object(w.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.state.account&&this.init().then((function(e){t.setState(e)})).catch((function(e){t.logError(e)}))}},{key:"init",value:function(){var t=Object(j.a)(h.a.mark((function t(){var e,n,a,i,s=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.account&&this.state.network){t.next=2;break}return t.abrupt("return",null);case 2:if(t.prev=2,this.setState({loading:!0}),e=R(this.state.network)){t.next=7;break}throw new Error("Wrong network! Change network and reload.");case 7:return t.next=9,U(e,this.state.account);case 9:n=(n=t.sent).sort((function(t,e){return t.timestamp>e.timestamp?-1:1})),this.setState({totalTransactionCount:n.length,currentTransactionCount:0}),a=h.a.mark((function t(e){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n[e],t.prev=1,t.next=4,F(n[e].contract);case 4:a.contractName=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a.contractName="COULD NOT FETCH NAME: "+t.t0;case 10:return t.prev=10,t.next=13,F(n[e].approved);case 13:a.approvedName=t.sent,t.next=19;break;case 16:t.prev=16,t.t1=t.catch(10),a.approvedName="COULD NOT FETCH NAME: "+t.t1;case 19:a.status="none",a.id=e,s.setState((function(t){return{renderedTransactions:[].concat(Object(v.a)(t.renderedTransactions),[a]),currentTransactionCount:e+1}}));case 22:case"end":return t.stop()}}),t,null,[[1,7],[10,16]])})),i=0;case 14:if(!(i<n.length)){t.next=19;break}return t.delegateYield(a(i),"t0",16);case 16:i++,t.next=14;break;case 19:this.setState({loading:!1}),t.next=25;break;case 22:t.prev=22,t.t1=t.catch(2),this.setError(t.t1);case 25:case"end":return t.stop()}}),t,this,[[2,22]])})));return function(){return t.apply(this,arguments)}}()},{key:"setError",value:function(t){Y.b.error("Something went wrong!"),console.error(t)}},{key:"statusChanged",value:function(t,e){var n=this.state.renderedTransactions,a=n.findIndex((function(t){return t.hash===e.hash}));-1!==a&&(n[a].status=t,this.forceUpdate())}},{key:"render",value:function(){var t=this,e="";function n(t){return t.elements?Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"grid-items",children:"#"}),Object(m.jsx)("td",{className:"grid-items",children:"Time"}),Object(m.jsx)("td",{className:"grid-items",children:"Contract"}),Object(m.jsx)("td",{className:"grid-items",children:"Approved Address"}),Object(m.jsx)("td",{className:"grid-items",children:"Allowance"}),Object(m.jsx)("td",{className:"grid-items",children:"Revoke"})]})}),Object(m.jsx)("tbody",{children:t.elements})]}):Object(m.jsx)("div",{})}return this.state.renderedTransactions.length>0&&(e=this.state.renderedTransactions.map((function(e){return Object(m.jsx)(J,{tx:e,web3:t.props.web3,id:e.contract,account:t.state.account,status:e.status,onStatusChange:t.statusChanged},"allowance-"+e.hash)}))),Object(m.jsxs)("div",{className:"allowance",children:[Object(m.jsx)(tt,{account:this.state.account,network:this.state.network,update:this.walletUpdated}),Object(m.jsx)(Q,{account:this.state.account,address:"0x23F822FC0CA75622cF6C48A4fba508E068f0E15b"}),this.renderSpinner(this.state.loading),Object(m.jsx)(n,{elements:e})]})}},{key:"renderSpinner",value:function(t){return t?Object(m.jsx)(K,{total:this.state.totalTransactionCount,current:this.state.currentTransactionCount}):Object(m.jsx)("div",{})}},{key:"walletUpdated",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.account,n=t.network;this.setState({account:e,network:n})}},{key:"componentDidUpdate",value:function(t,e){e.account!==this.state.account&&this.init()}}]),n}(a.Component),nt=(n(496),new c.a(c.a.givenProvider));var at=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],i=e[1];return Object(m.jsxs)("div",{className:"content-wrapper",children:[Object(m.jsx)(Y.a,{}),Object(m.jsxs)("main",{className:"content",children:[Object(m.jsx)(f,{}),Object(m.jsx)(et,{web3:nt})]}),!1===n&&Object(m.jsx)("div",{className:"modal",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsx)("h3",{children:"Warning: Experimental Application"}),Object(m.jsxs)("p",{children:["This application is a fork, of an Ethereum based application and just ported for the Harmony blockchain. It is not thoroughly tested and you should ",Object(m.jsx)("b",{children:"use it on your own risk!"})]}),Object(m.jsx)("button",{onClick:function(){return i(!0)},children:"Okay"})]})})]})};r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(at,{})}),document.getElementById("root"))}},[[497,1,2]]]);
//# sourceMappingURL=main.a6085b6f.chunk.js.map